<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sales Forecasting Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #f4f7fc;
    }
    .card {
      border-radius: 10px;
    }
    .stat-card {
      background-color: #4f6d7a;
      color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }
    .forecast-container {
      margin-top: 30px;
    }
    .chart-container {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Sales Forecasting</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Dashboard</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Reports</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Settings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
    </ul>
  </div>
</nav>

<!-- Main Content -->
<div class="container forecast-container">

  <!-- Quick Stats Section -->
  <div class="row">
    <div class="col-md-4">
      <div class="card stat-card">
        <h4>Total Sales</h4>
        <h2>$1,234,567</h2>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card stat-card">
        <h4>Growth Rate</h4>
        <h2>12.5%</h2>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card stat-card">
        <h4>Predicted Sales</h4>
        <h2>$1,500,000</h2>
      </div>
    </div>
  </div>

  <!-- Sales Forecast Chart -->
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Sales Forecasting</h3>
          <div class="chart-container">
            <canvas id="salesForecastChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Form for Historical Data -->
  <div class="row mt-5">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Upload Historical Data</h3>
          <form id="dataUploadForm">
            <div class="mb-3">
              <label for="salesData" class="form-label">Upload CSV</label>
              <input type="file" class="form-control" id="salesData" accept=".csv">
            </div>
            <button type="submit" class="btn btn-primary">Upload Data</button>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
  // Sample Data for Sales Forecasting Chart
  const ctx = document.getElementById('salesForecastChart').getContext('2d');
  const salesForecastChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['January', 'February', 'March', 'April', 'May', 'June'],
      datasets: [{
        label: 'Actual Sales',
        data: [120000, 150000, 170000, 200000, 220000, 240000],
        borderColor: 'rgba(75, 192, 192, 1)',
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        fill: true
      },
      {
        label: 'Predicted Sales',
        data: [130000, 160000, 180000, 210000, 230000, 250000],
        borderColor: 'rgba(255, 99, 132, 1)',
        backgroundColor: 'rgba(255, 99, 132, 0.2)',
        fill: true
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>

<script>
    document.getElementById('dataUploadForm').addEventListener('submit', function (e) {
      e.preventDefault();
      
      const formData = new FormData();
      const fileInput = document.getElementById('salesData');
      
      if (fileInput.files.length > 0) {
        formData.append('salesData', fileInput.files[0]);
        
        // Send the file to the backend via Fetch API
        fetch('/upload', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          // Update the chart with the predicted data
          const labels = data.dates;
          const predictedSales = data.predictions;
  
          // Update Chart.js with new predicted data
          salesForecastChart.data.labels = labels;
          salesForecastChart.data.datasets[1].data = predictedSales;
          salesForecastChart.update();
        })
        .catch(error => {
          console.error('Error uploading file:', error);
        });
      } else {
        alert('Please upload a CSV file');
      }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
